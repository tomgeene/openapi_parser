swagger: "2.0"
info:
  title: Comprehensive API Test - Swagger 2.0
  version: 1.0.0
  description: Comprehensive test for Swagger 2.0 features
  contact:
    name: API Team
    email: api@example.com
  license:
    name: Apache 2.0
    url: https://www.apache.org/licenses/LICENSE-2.0
  termsOfService: https://example.com/terms

host: api.example.com
basePath: /v1
schemes:
  - https
  - http
consumes:
  - application/json
  - application/xml
produces:
  - application/json
  - application/xml

tags:
  - name: products
    description: Product operations
  - name: categories
    description: Category operations

paths:
  /products:
    get:
      summary: List products
      operationId: listProducts
      tags:
        - products
      parameters:
        - name: category
          in: query
          type: string
          description: Filter by category
        - name: minPrice
          in: query
          type: number
          format: float
          minimum: 0
        - name: maxPrice
          in: query
          type: number
          format: float
          maximum: 10000
        - name: inStock
          in: query
          type: boolean
        - name: tags
          in: query
          type: array
          items:
            type: string
          collectionFormat: csv
        - $ref: "#/parameters/PageParam"
      responses:
        "200":
          description: Successful response
          schema:
            type: object
            properties:
              products:
                type: array
                items:
                  $ref: "#/definitions/Product"
              total:
                type: integer
          examples:
            application/json:
              products:
                - id: 1
                  name: Product 1
                  price: 29.99
              total: 1
        "400":
          $ref: "#/responses/BadRequest"
        default:
          description: Unexpected error
          schema:
            $ref: "#/definitions/Error"
    post:
      summary: Create product
      operationId: createProduct
      tags:
        - products
      parameters:
        - name: product
          in: body
          required: true
          schema:
            $ref: "#/definitions/ProductInput"
      responses:
        "201":
          description: Product created
          schema:
            $ref: "#/definitions/Product"
        "400":
          $ref: "#/responses/BadRequest"

  /products/{productId}:
    parameters:
      - name: productId
        in: path
        required: true
        type: integer
        description: Product ID
    get:
      summary: Get product
      operationId: getProduct
      tags:
        - products
      produces:
        - application/json
        - application/xml
      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/Product"
          headers:
            X-Request-ID:
              type: string
              description: Request identifier
        "404":
          $ref: "#/responses/NotFound"
    put:
      summary: Update product
      operationId: updateProduct
      tags:
        - products
      parameters:
        - name: product
          in: body
          required: true
          schema:
            $ref: "#/definitions/ProductUpdate"
      responses:
        "200":
          description: Updated
          schema:
            $ref: "#/definitions/Product"
    delete:
      summary: Delete product
      operationId: deleteProduct
      tags:
        - products
      responses:
        "204":
          description: Deleted
        "404":
          $ref: "#/responses/NotFound"

  /upload:
    post:
      summary: Upload file
      operationId: uploadFile
      consumes:
        - multipart/form-data
      parameters:
        - name: file
          in: formData
          type: file
          required: true
          description: File to upload
        - name: description
          in: formData
          type: string
      responses:
        "200":
          description: File uploaded

  /validation-tests/strings:
    post:
      summary: Test string validations
      parameters:
        - name: data
          in: body
          schema:
            type: object
            properties:
              basic:
                type: string
              withLength:
                type: string
                minLength: 3
                maxLength: 20
              pattern:
                type: string
                pattern: ^\d{3}-\d{2}-\d{4}$
              enum:
                type: string
                enum:
                  - option1
                  - option2
                  - option3
              email:
                type: string
                format: email
              date:
                type: string
                format: date
      responses:
        "200":
          description: OK

  /validation-tests/numbers:
    post:
      summary: Test number validations
      parameters:
        - name: data
          in: body
          schema:
            type: object
            properties:
              integer:
                type: integer
              int32:
                type: integer
                format: int32
              int64:
                type: integer
                format: int64
              float:
                type: number
                format: float
              double:
                type: number
                format: double
              bounded:
                type: number
                minimum: 0
                maximum: 100
                exclusiveMinimum: true
                exclusiveMaximum: true
              multiple:
                type: number
                multipleOf: 5
      responses:
        "200":
          description: OK

  /validation-tests/arrays:
    post:
      summary: Test array validations
      parameters:
        - name: data
          in: body
          schema:
            type: object
            properties:
              simpleArray:
                type: array
                items:
                  type: string
              boundedArray:
                type: array
                minItems: 1
                maxItems: 10
                items:
                  type: integer
              uniqueArray:
                type: array
                uniqueItems: true
                items:
                  type: string
              nestedArray:
                type: array
                items:
                  type: array
                  items:
                    type: number
      responses:
        "200":
          description: OK

definitions:
  Product:
    type: object
    required:
      - id
      - name
      - price
    properties:
      id:
        type: integer
        format: int64
        readOnly: true
      name:
        type: string
        minLength: 1
        maxLength: 200
      description:
        type: string
      price:
        type: number
        format: double
        minimum: 0
        exclusiveMinimum: true
      inStock:
        type: boolean
        default: true
      category:
        type: string
      tags:
        type: array
        items:
          type: string
        uniqueItems: true
      metadata:
        type: object
        additionalProperties:
          type: string
      createdAt:
        type: string
        format: date-time
        readOnly: true
    xml:
      name: Product
    example:
      id: 1
      name: Example Product
      price: 19.99
      inStock: true

  ProductInput:
    type: object
    required:
      - name
      - price
    properties:
      name:
        type: string
      price:
        type: number
        minimum: 0
      description:
        type: string
      category:
        type: string

  ProductUpdate:
    type: object
    properties:
      name:
        type: string
      price:
        type: number
      description:
        type: string

  Error:
    type: object
    required:
      - code
      - message
    properties:
      code:
        type: integer
      message:
        type: string
      details:
        type: array
        items:
          type: string

  Animal:
    type: object
    discriminator: animalType
    required:
      - animalType
    properties:
      animalType:
        type: string

  Cat:
    allOf:
      - $ref: "#/definitions/Animal"
      - type: object
        properties:
          meow:
            type: string

  Dog:
    allOf:
      - $ref: "#/definitions/Animal"
      - type: object
        properties:
          bark:
            type: string

parameters:
  PageParam:
    name: page
    in: query
    type: integer
    minimum: 1
    default: 1
    description: Page number

responses:
  BadRequest:
    description: Bad request
    schema:
      $ref: "#/definitions/Error"

  NotFound:
    description: Resource not found
    schema:
      $ref: "#/definitions/Error"

securityDefinitions:
  api_key:
    type: apiKey
    name: api_key
    in: header
  basic_auth:
    type: basic
  oauth2_auth:
    type: oauth2
    flow: accessCode
    authorizationUrl: https://example.com/oauth/authorize
    tokenUrl: https://example.com/oauth/token
    scopes:
      read:products: Read products
      write:products: Modify products

security:
  - api_key: []

